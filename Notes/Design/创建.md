# 创建

## 单例

所有语言都有类似的过程.

* 构造函数私有化, oc 里面 alloc, init 是父类的, 但是可以通过修改 allocWithZone 让数据空间总是一份
* 增加静态私有变量, 作为单例对象的值.
* 用静态的对外接口, 来获得单例对象.

懒汉式和恶汉式的区别, 就是初始化的时机不一样.

单例也有多线程写法, 不过业务代码里面, 没有专门的写过.

## 工厂

工厂模式的功能就是, 将类的创造过程, 从业务代码中进行抽离. 将生成什么类, 生成类的过程, 以及生成对象之间的配套关系, 放到一个逻辑单元 -- 工厂之中. 工厂返回的, 是一个抽象的父类指针.

### 简单工厂

传入一个参数, 让工厂生成对应的对象. 当然, 这里面需要一个 switch, 这样修改了源代码, 不符合开放封闭原则. 生产所有的对象, 工厂类的责任过重.

### 工厂方法模式

一个产品, 一个产品的工厂类, 所有的工厂类, 有一个抽象工厂父类. 创建的过程, 从 new ProductABC, 变成了 new FactoryABC 了.

这个唯一的好处就是符合开闭原则, 但是需要维护一个和产品对应的工厂类, 和工程抽象类.

### 抽象工厂模式.

将产品进行了规划, 某些产品必须配套使用. 不符合开闭原则. 增加一个产品, 需要修改工厂类的接口. 增加工厂, 符合开闭原则, 也就是, 增加产品族, 符合开闭原则.

## 组合模式

将对象聚合成为树形结构来表现 '整体/部分' 的层次结构.
让客户可以用一致的方式, 来处理个别对象以及对象的组合.