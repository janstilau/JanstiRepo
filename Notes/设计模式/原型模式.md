# 原型模式

Prototype 的意义在于，你拿到一个 Base* ，它指向某个 Derived 对象，你想克隆出 Derived 对象，但代码中不写出 Derived 的具体类型，因为有很多派生类，这种情况下你用构造函数是搞不定的，type-switch 是 bad smells 。另外，这里考虑 virtual 的性能损失是主次不分，构造对象需要分配内存，这开销比一次虚函数调用大多了。Prorobuf Message 就采用了 prototype 模式，你可以参考一下。

作者：陈硕
链接：https://www.zhihu.com/question/52610176/answer/131314586
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。