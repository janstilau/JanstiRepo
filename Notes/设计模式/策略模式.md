# 策略模式

## 动机

某些对象使用的算法, 可能会多种多样, 经常改变, 如果硬编码到程序里面, 会有大量的判断, 并且所有的代码要写在一个类里面. 如果要增加一个算法, 那么整个 switch 都要改变. 这就和开放封闭原则相悖了. 对于新的需求, 应该是用扩展的方式来满足新的需求, 如果用 switch 进行分发, 就会导致这样的问题.

看待程序, 要用时间轴的眼光来看, 设想之后的改变的点. 不要预想设定, 需求是固定的.

虽然, 引用也有多态性, 但是实现多态, 我们还是用指针, 引用会有其他的一些问题.
在定义基类的时候, 一定要把析构函数编程 virtual 的, 就算现在没有需求, 但是为了子类能够 delete 的时候不出问题, 明确的写出来是很有必要的.

设计模式, 要放在时间轴里面去看, 优势缺点都要和需求的变化一起考虑.

所谓复用, 是说编译之后测试之后, 源代码文件不动, 是二进制文件上的复用. 实际上, 在一个方法后面添加代码, 很容易污染之前的代码, 会将这个函数的功能, 引入一个无法预料的地步.

这个模式的代码很简单. 之前看过好几遍了, 也就不列出来了.

## 定义

定义一系列的算法, 把他们一个个的封装起来, 并且可以互相替换(支持变化), 这个模式, 使得算法可以独立于使用它的客户程序(稳定)进行变化(扩展).

这个模式, 提供了条件判断语句之外的一种选择. switch case 散弹太容易违背开放封闭原则.

一般来说, 出现了大量的判断, 就是 strategy 模式