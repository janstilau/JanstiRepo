# 组合模式 

这个模式之前想过很久了.

## 要点

采用树形结构, 来实现普遍存在的对象容器, 从而将 一对多 的关系, 转化成为 一对一 的关系, 使得客户代码可以一致的(稳定)处理对象和对象的容器, 无序关心处理的是单个的对象, 还是组合的对象容器.
这里的意思是说, 如果容器和对象不是统一的接口, 那么客户端代码那里就是需要拿到类型, 如果是对象处理对象, 如果是容器, 要取出容器里面的每个元素, 然后处理. 毕竟, type switch 是 bad smell

将客户代码和复杂的对象容器结构解耦, 是 composite 的核心思想, 在解耦之后, 客户代码和纯粹的抽象接口发生以来, 从而更好地应对变化.

可以在 component 里面, 放入 parent 的指针, 方便回溯.