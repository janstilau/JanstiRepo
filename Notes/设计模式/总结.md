# 管理变化, 提高复用

所有的设计, 都是提高复用. 不要记忆各个模式的代码, 不要把模式当算法用.

## 分解 和 抽象

抽象, 是为了统一的处理, 而多态, 带来具体的实现.

## 原则 , 原则高于各个具体的模式

## 重构 --> 慢慢把代码装到模式里面


## C++ 对象模型


B : A
class A: B{

}

B : A
class A{
    B n;
}

A --> B
class A{
    B *pb;
}

前面的两种, 都是固定下来的结构, B 继承 A, B has A, 都是编译时绑定的,  而第三种, 用指针的形式, 则是, A 中有一个 B, 但是 B 是可以改动的. B 的指向改变, 就可以引起行为的变化, 才能完成动态绑定. 设计模式, 最后都是通过指针指向一个多态对象, 来完成变化的. 指针指向多态对象, 是松耦合的设计基础.

## 关注点

稳定点 和 变化点.
对于所有模式, 要分辨出哪些是稳定的, 哪些是变化点. 模式, 都是架构是稳定点的, 指针指向的是变化点.

## 不用模式的时候

* 代码可读性很差. --> 基本代码质量没有保证
* 需求理解还很浅
* 变化还没有显示 --> url 的设计
* 不是系统的关键依赖点
* 项目没有复用价值
* 项目紧张

## 经验之谈

* 不要为了模式而模式
* 关注抽象类和接口
* 理清变化点和稳定点
* 审视依赖关系
* 要有 framework, 和 application 的思维
* 良好的设计是演化的结果.